var tame = require('tamejs').runtime;
var __tame_defer_cb = null;
var __tame_fn_0 = function (__tame_k) {
    tame.setActiveCb (__tame_defer_cb);
    "use strict" ;
    
    var slots = { } ;
    var assert = require ( "assert" ) ;
    
    var slots = { } ;
    var n = 10 ;
    
    exports [ "test nested serial/parallel" ] = {
    
    run :
    function  (autocb) {
        var __tame_defer_cb = tame.findDeferCb ([autocb]);
        tame.setActiveCb (__tame_defer_cb);
        var __tame_this = this;
        var __tame_fn_1 = function (__tame_k) {
            tame.setActiveCb (__tame_defer_cb);
            var __tame_defers = new tame.Deferrals (__tame_k);
            var __tame_fn_2 = function (__tame_k) {
                tame.setActiveCb (__tame_defer_cb);
                 for (var i = 0 ; i < n ; i ++) {
                    (
                    function  (autocb) {
                        var __tame_defer_cb = tame.findDeferCb ([autocb]);
                        tame.setActiveCb (__tame_defer_cb);
                        var __tame_this = this;
                        var __tame_fn_9 = function (__tame_k) {
                            tame.setActiveCb (__tame_defer_cb);
                            var my_i = i ;
                            var __tame_fn_3 = function (__tame_k) {
                                tame.setActiveCb (__tame_defer_cb);
                                var __tame_fn_4 = function (__tame_k) {
                                    tame.setActiveCb (__tame_defer_cb);
                                    var __tame_defers = new tame.Deferrals (__tame_k);
                                    var __tame_fn_5 = function (__tame_k) {
                                        tame.setActiveCb (__tame_defer_cb);
                                        setTimeout (
                                        __tame_defers.defer ( { 
                                            parent_cb : __tame_defer_cb,
                                            line : 19,
                                            file : "test/cases/34.tjs"
                                        } )
                                        , 5*Math . random ( ) ) ;
                                        tame.callChain([__tame_k]);
                                        tame.setActiveCb (null);
                                    };
                                    __tame_fn_5(tame.end);
                                    __tame_defers._fulfill();
                                    tame.setActiveCb (null);
                                };
                                var __tame_fn_6 = function (__tame_k) {
                                    tame.setActiveCb (__tame_defer_cb);
                                    var __tame_defers = new tame.Deferrals (__tame_k);
                                    var __tame_fn_7 = function (__tame_k) {
                                        tame.setActiveCb (__tame_defer_cb);
                                        setTimeout (
                                        __tame_defers.defer ( { 
                                            parent_cb : __tame_defer_cb,
                                            line : 20,
                                            file : "test/cases/34.tjs"
                                        } )
                                        , 4*Math . random ( ) ) ;
                                        tame.callChain([__tame_k]);
                                        tame.setActiveCb (null);
                                    };
                                    __tame_fn_7(tame.end);
                                    __tame_defers._fulfill();
                                    tame.setActiveCb (null);
                                };
                                var __tame_fn_8 = function (__tame_k) {
                                    tame.setActiveCb (__tame_defer_cb);
                                    slots [ my_i ] = true ;
                                    tame.callChain([__tame_k]);
                                    tame.setActiveCb (null);
                                };
                                tame.callChain([__tame_fn_4, __tame_fn_6, __tame_fn_8, __tame_k]);
                                tame.setActiveCb (null);
                            };
                            tame.callChain([__tame_fn_3, __tame_k]);
                            tame.setActiveCb (null);
                        };
                        tame.callChain([__tame_fn_9, autocb, __tame_k]);
                        tame.setActiveCb (null);
                    }
                    ) (
                    __tame_defers.defer ( { 
                        parent_cb : __tame_defer_cb,
                        line : 22,
                        file : "test/cases/34.tjs"
                    } )
                    ) ;
                }
                tame.callChain([__tame_k]);
                tame.setActiveCb (null);
            };
            __tame_fn_2(tame.end);
            __tame_defers._fulfill();
            tame.setActiveCb (null);
        };
        tame.callChain([__tame_fn_1, autocb, __tame_k]);
        tame.setActiveCb (null);
    }
    ,
    
    check :
    function  () {
         for (var i = 0 ; i < n ; i ++) {
            assert . ok ( slots [ i ] , "slots[" + i + "] is set!" ) ;
        }
    }
    } ;
    tame.callChain([__tame_k]);
    tame.setActiveCb (null);
};
__tame_fn_0 (tame.end);